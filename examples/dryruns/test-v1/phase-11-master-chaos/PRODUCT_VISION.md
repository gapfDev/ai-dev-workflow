# PRODUCT_VISION.md
# NexaCore Platform â€” Healthcare SaaS

> **Project Type:** Greenfield  
> **Workflow Step:** 1 / 7  
> **Generated by:** Manager Agent (Auto-Simulated Discovery Interview)  
> **Date:** 2026-02-21

---

## ðŸ—£ï¸ Discovery Interview Log

ðŸ¤– **Manager:** Hello! I'll guide you through a 7-step development process. First, let me understand your product deeply. What problem does this system solve, and who are the primary users?

ðŸ‘¤ **Humano (Auto-simulado):** Los doctores de turno reciben llamadas telefÃ³nicas cuando llega un paciente urgente. El proceso es lento, manual, y ha causado 3 incidentes mÃ©dicos graves este aÃ±o por retrasos en la atenciÃ³n. Quiero una soluciÃ³n digital que reemplace eso.

ðŸ¤– **Manager:** Who are ALL the types of users that will interact with this system?

ðŸ‘¤ **Humano (Auto-simulado):** Tres tipos: (1) Doctores de turno â€” reciben alertas. (2) Administradores de clÃ­nica â€” gestionan el flujo de pacientes, agendas y facturaciÃ³n. (3) Personal de admisiÃ³n â€” captura los formularios de los pacientes.

ðŸ¤– **Manager:** What are the 3 MOST IMPORTANT things this system must do?

ðŸ‘¤ **Humano (Auto-simulado):** 1) Enviar alertas de urgencia en tiempo real al doctor en su telÃ©fono. 2) Leer los formularios de admisiÃ³n para detectar si hay una emergencia automÃ¡ticamente. 3) Dashboard web para administradores con flujo de pacientes, agenda y facturaciÃ³n.

ðŸ¤– **Manager:** Is this mobile, web, or both? Does it need login and user authentication?

ðŸ‘¤ **Humano (Auto-simulado):** Ambos. La app del doctor es mÃ³vil. El dashboard de administrador es web. SÃ­, necesita login â€” cada clÃ­nica tiene su propio staff.

ðŸ¤– **Manager:** Does it need to store data? Where? Are there external integrations?

ðŸ‘¤ **Humano (Auto-simulado):** Cloud. El billing ya lo manejamos con Square, no queremos cambiar eso. Las notificaciones van por SMS tambiÃ©n con Twilio, porque algunos doctores mayores no revisan apps. La app del doctor DEBE funcionar aunque el WiFi de la clÃ­nica falle.

ðŸ¤– **Manager:** What is the MINIMUM needed to consider this useful â€” your MVP?

ðŸ‘¤ **Humano (Auto-simulado):** MVP mÃ­nimo: que cuando llegue un paciente urgente, el doctor reciba la alerta en su telÃ©fono inmediatamente, sin importar si hay WiFi o no.

ðŸ¤– **Manager:** Is there a deadline and who will work on this?

ðŸ‘¤ **Humano (Auto-simulado):** 3 meses de presupuesto aprobado. Tengo 4 desarrolladores senior en mi empresa. El agente (ustedes) son el equipo externo que no tiene acceso a nuestro Jira. Sincronizamos manualmente.

ðŸ¤– **Manager:** Walk me through step by step: a doctor opens their app â€” what do they see first? What do they do next?

ðŸ‘¤ **Humano (Auto-simulado):** Abre la app, ve la lista de alertas activas de su turno. Si llega una nueva urgencia, le llega una notificaciÃ³n push Y SMS. Toca la notificaciÃ³n, ve el nombre del paciente, sala asignada, nivel de urgencia y motivo. Puede marcar la alerta como "Atendida".

ðŸ¤– **Manager:** What are the 2-3 most critical screens or pages?

ðŸ‘¤ **Humano (Auto-simulado):** App doctor: (1) Lista de alertas activas. (2) Detalle de alerta de urgencia. Dashboard admin: (3) Vista general del flujo de pacientes â€” quiÃ©n estÃ¡ en espera, quiÃ©n estÃ¡ siendo atendido, quiÃ©n ya saliÃ³.

ðŸ¤– **Manager:** What are your design preferences?

ðŸ‘¤ **Humano (Auto-simulado):** Serio, mÃ©dico, pero moderno. Nada de colores chillantes. Azules profundos y blancos limpios. IMPORTANTE: Antes de que alguien escriba cÃ³digo, quiero ver cÃ³mo va a quedar el dashboard. Me han quemado antes con "lo hacemos y luego lo ajustamos".

ðŸ¤– **Manager:** What is the most important data in this system?

ðŸ‘¤ **Humano (Auto-simulado):** Los datos de los pacientes. SSNs, diagnÃ³sticos, prescripciones â€” NADA puede ir en texto plano ni en logs sin cifrar. Cumplimiento HIPAA es no negociable.

ðŸ¤– **Manager:** How will you know this is successful?

ðŸ‘¤ **Humano (Auto-simulado):** Ã‰xito = cero incidentes mÃ©dicos por retraso en alertas. MÃ©trica secundaria: tiempo promedio de respuesta del doctor baja de +15 minutos actuales a menos de 2 minutos.

ðŸ¤– **Manager:** What should happen when there's no internet on the doctor's phone?

ðŸ‘¤ **Humano (Auto-simulado):** La app del doctor debe funcionar offline. Las alertas deben llegar igual â€” por eso el SMS via Twilio es crÃ­tico como canal redundante. La app debe sincronizar cuando recupere conexiÃ³n.

ðŸ¤– **Manager:** I have three follow-up questions to close blind spots. First: the intake forms filled by admissions staff â€” are they always digital, or can they be handwritten and scanned?

ðŸ‘¤ **Humano (Auto-simulado):** Ambas. A veces el personal llena formularios en papel y luego los escanea. A veces los llenan digitalmente. La IA debe poder leer ambos.

ðŸ¤– **Manager:** Second: for billing via Square â€” do you need the dashboard to show billing totals and status per patient, or is Square fully managing that separately?

ðŸ‘¤ **Humano (Auto-simulado):** El dashboard debe mostrar el estado de facturaciÃ³n por paciente (pendiente, pagado, rechazado). Square lo procesa, nosotros solo mostramos el estado.

ðŸ¤– **Manager:** Third: there are 50 clinics. Does each clinic have completely isolated data, or do some administrators have cross-clinic visibility?

ðŸ‘¤ **Humano (Auto-simulado):** Aislados por defecto. Cada clÃ­nica ve solo sus datos. Solo los administradores centrales (corporativos) pueden ver reportes multi-clÃ­nica.

ðŸ¤– **Manager:** âš ï¸ I'm flagging two critical points that came up during my review: (a) Can intake forms accidentally contain credit card numbers written in wrong fields by reception? (b) Do you have a HIPAA audit log of who accesses patient records?

ðŸ‘¤ **Humano (Auto-simulado):** (a) SÃ­, pasa. Los pacientes dicen "cÃ³brame aquÃ­" y el recepcionista lo anota en el campo equivocado. (b) No tenemos auditorÃ­a formal. SÃ© que HIPAA lo exige pero nunca lo hemos implementado.

ðŸ¤– **Manager:** Do you want 4 agents/developers working in parallel to finish faster?

ðŸ‘¤ **Humano (Auto-simulado):** SÃ­, quiero que 4 personas trabajen en esto al mismo tiempo para terminar mÃ¡s rÃ¡pido.

ðŸ¤– **Manager:** Summary confirmed. Based on everything: NexaCore is a healthcare SaaS with a mobile app (doctor alerts with offline/SMS fallback), a web dashboard (admin patient flow + billing display), and an AI-powered intake form reader (OCR + emergency detection). HIPAA compliance and credit card scrubbing are non-negotiable. Design mockup of dashboard required before coding. Is anything missing?

ðŸ‘¤ **Humano (Auto-simulado):** No, eso es todo. Procede.

---

## ðŸ“‹ Product Vision

### Problem Statement
A network of 50 private health clinics in Latin America currently relies on phone calls to alert on-duty doctors when urgent patients arrive. This manual process is slow, error-prone, and has caused 3 serious medical incidents this year due to response delays.

---

### Users

| Role | Description | Platform |
|------|-------------|----------|
| **On-Duty Doctor** | Receives urgent patient alerts on mobile | Mobile (iOS/Android) |
| **Clinic Administrator** | Manages patient flow, scheduling, billing status | Web Dashboard |
| **Admissions Staff** | Captures patient intake forms (paper/digital) | Web (internal) |
| **Corporate Admin** | Views cross-clinic reports | Web Dashboard |

---

### Core Features

#### 1. Real-Time Urgency Alert System (Doctor App â€” Mobile)
- Push notification + SMS (Twilio) when an urgent patient is registered
- Alert detail screen: patient name, assigned room, urgency level, reason
- "Mark as Attended" action
- **Offline-first architecture**: app must function without clinic WiFi
- Sync queued actions on reconnection

#### 2. AI-Powered Intake Form Reader
- Reads handwritten scanned forms AND digital forms
- OCR + classification to detect emergency indicators automatically
- **CRITICAL**: Must detect and SCRUB/REDACT credit card numbers accidentally entered in wrong fields (PAN scrubber before any storage or log)
- Triggers alert pipeline when emergency is detected

#### 3. Admin Web Dashboard
- Live patient flow view: Waiting â†’ Being Attended â†’ Discharged
- Appointment scheduling per clinic
- Billing status display per patient (Pending / Paid / Rejected â€” data from Square)
- Per-clinic data isolation (corporates can see multi-clinic reports)

#### 4. HIPAA Audit Log
- Record every access to patient records (who, when, what)
- Logs must be encrypted at rest and in transit
- No PII / PHI in plaintext in logs

---

### Non-Negotiables / Hard Constraints

| Constraint | Detail |
|------------|--------|
| HIPAA compliance | SSNs, diagnoses, prescriptions â€” zero plaintext, encrypted logs mandatory |
| Offline doctor app | Must work without clinic WiFi; SMS (Twilio) as redundant channel |
| Square billing | No billing stack change; dashboard displays Square status only |
| Twilio SMS | Mandatory secondary alert channel for older doctors |
| PAN scrubbing | Credit card numbers detected and redacted from intake forms before any storage |
| No Jira access | External dev team uses BACKLOG.md as source of truth; manual sync to client Jira |
| 4-parallel agents | Team expects 4 simultaneous developers working in parallel |

---

### User Flows

#### Flow 1: Urgent Patient Arrival
1. Admissions staff fills intake form (paper scan or digital)
2. AI reader processes the form â†’ detects urgency flags â†’ triggers alert
3. System sends push notification to on-duty doctor's app AND SMS via Twilio
4. Doctor taps notification â†’ sees: patient name, room, urgency level, reason
5. Doctor marks alert as "Attended"
6. Dashboard updates patient status in real-time

#### Flow 2: Admin Dashboard â€” Patient Flow Monitoring
1. Admin logs in â†’ sees clinic overview: patients in each status
2. Admin can view individual patient record (HIPAA audit log triggered)
3. Admin sees billing status from Square integration
4. Admin schedules appointments via calendar UI

#### Flow 3: Corporate Multi-Clinic View
1. Corporate admin logs in â†’ selects multi-clinic view
2. Sees aggregated stats per clinic (patient volume, response times)
3. Drill-down to individual clinic

---

### MVP Definition
> **Minimum Viable Product:** When an urgent patient arrives â†’ the on-duty doctor receives an alert on their phone within 2 minutes, regardless of WiFi availability.

**MVP Scope:** Alert system (features 1 + 2 intake trigger) + basic doctor mobile app.  
**Post-MVP:** Full admin dashboard, billing display, multi-clinic corporate view, appointment scheduling.

---

### Design Preferences

- **Style:** Professional medical, modern
- **Colors:** Deep blues (#1A3A6B, #2563EB), clean whites (#FFFFFF, #F8FAFC)
- **NOT:** No bright/flashy colors, no consumer-grade aesthetics
- **REQUIRED:** Dashboard mockup MUST be approved by client before any coding begins
- **UI Approval Gate:** Mandatory before Step 2

---

### Success Metrics

| Metric | Target |
|--------|--------|
| Medical incidents due to alert delay | 0 (down from 3/year) |
| Doctor alert response time | < 2 minutes (down from ~15 min) |
| System uptime | 99.9% |
| HIPAA audit compliance | 100% â€” every patient record access logged |

---

### Edge Cases & Constraints

| Scenario | Handling |
|----------|----------|
| No WiFi at clinic | Push via Twilio SMS; app syncs when reconnected |
| Handwritten form with sloppy handwriting | OCR with confidence score; low-confidence â†’ flag for human review |
| Credit card # in wrong intake field | PAN detection â†’ auto-redact before storage or logging |
| Doctor doesn't respond to alert | Escalation: alert sent to backup doctor after N minutes (âš ï¸ N not yet defined â€” ask) |
| 50 clinics, isolated data | Multi-tenant schema with row-level security OR separate DB per clinic |

---

### âš ï¸ Open Items (Must Resolve Before Step 2)
- [ ] âš ï¸ Escalation timeout: How long before alert escalates to backup doctor?
- [ ] âš ï¸ Data architecture: Row-level multi-tenant vs. separate DB per clinic?
- [ ] âš ï¸ iOS priority: Is iOS or Android primary for doctor app?

---

## âœ… Step 1 Summary

ðŸ“‹ **Deliverables Created:**
- PRODUCT_VISION.md completed after 15-question exhaustive interview

ðŸŽ¯ **Key Elements:**
1. Real-Time Furgency Alert System (mobile, offline-first, SMS fallback)
2. AI-Powered OCR Intake Form Reader with PAN scrubbing
3. Admin Web Dashboard (patient flow, billing display via Square)
4. HIPAA Audit Log (encrypted, mandatory)
5. Corporate Multi-Clinic View

ðŸ“ **Critical Blind Spots Uncovered:**
- Credit card numbers accidentally written in intake form fields â†’ PAN scrubber required
- No HIPAA audit log implementation exists â†’ must be built (not optional)
- 4 parallel agents required â†’ multi-agent coordination skill needed
- Dashboard design approval required BEFORE any code

ðŸ“Š **Progress:** [##--------] 1/7

> **UI Design Gate Triggered:** Client explicitly requires dashboard mockup approval before coding. Executing `ui-design-preview` skill next.
